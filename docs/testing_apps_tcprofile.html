

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Testing Apps: Profiles (tcprofile) &mdash; TcEx 1.0.5 documentation</title>








  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>


      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>

    <script type="text/javascript" src="_static/js/theme.js"></script>




  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Testing Apps: Running Profiles (tcrun)" href="testing_apps_tcrun.html" />
    <link rel="prev" title="Building Apps: Packaging (tcpackage)" href="building_apps_tcpackage.html" />
</head>

<body class="wy-body-for-nav">


  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



            <a href="index.html" class="icon icon-home"> TcEx



          </a>




              <div class="version">
                1.0.5
              </div>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">






              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_apps_quickstart.html">Building Apps: Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_apps_tcinit.html">Building Apps: Templates (tcinit)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_apps_tclib.html">Building Apps: Dependencies (tclib)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_apps_tcpackage.html">Building Apps: Packaging (tcpackage)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Testing Apps: Profiles (tcprofile)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#common-usage">Common Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#output">Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updates">Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environment-variables">Environment Variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#profile-format">Profile Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#args-app">args.app</a></li>
<li class="toctree-l3"><a class="reference internal" href="#args-default">args.default</a></li>
<li class="toctree-l3"><a class="reference internal" href="#autoclear">autoclear</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-files">data_files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#description">description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exit-codes">exit_codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#groups">groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-json">install_json</a></li>
<li class="toctree-l3"><a class="reference internal" href="#profile-name">profile_name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quiet">quiet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#validations">validations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#staging-redis-data">Staging Redis Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Data Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-validation">Data Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-operators">Supported Operators</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing_apps_tcrun.html">Testing Apps: Running Profiles (tcrun)</a></li>
<li class="toctree-l1"><a class="reference internal" href="app_deployment_configuration.html">App-Deployment Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="app_directory_structure.html">App-Directory Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_batch.html">Module: Batch</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_metrics.html">Module: Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_notifications.html">Module: Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_playbook.html">Module: Playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_request.html">Module: Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_resource.html">Module: Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_ti.html">Module: Threat Intelligence</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_utils.html">Module: Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="authorization.html">Authorization (Token/HMAC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="exit.html">Exit</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="message_tc.html">Message TC</a></li>
<li class="toctree-l1"><a class="reference internal" href="parser.html">Parser/Args</a></li>
<li class="toctree-l1"><a class="reference internal" href="proxies.html">Proxies</a></li>
<li class="toctree-l1"><a class="reference internal" href="results_tc.html">Results TC</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcex_docs/modules.html">TcEx Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcex_docs/modules.html#tcex-cli">TcEx CLI</a></li>
</ul>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


      <nav class="wy-nav-top" aria-label="top navigation">

          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TcEx</a>

      </nav>


      <div class="wy-nav-content">

        <div class="rst-content">

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">

      <li><a href="index.html">Docs</a> &raquo;</li>

      <li>Testing Apps: Profiles (tcprofile)</li>


      <li class="wy-breadcrumbs-aside">



      </li>

  </ul>


  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <div class="section" id="testing-apps-profiles-tcprofile">
<span id="testing-apps-tcprofile"></span><h1>Testing Apps: Profiles (tcprofile)<a class="headerlink" href="#testing-apps-profiles-tcprofile" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">tcprofile</span></code> CLI tool provides a simple interface to create testing profiles.  These profiles can be used to perform local testing of the App before deploying to ThreatConnect.  Multiple profiles can be created and grouped to allow testing of different data inputs and outputs.</p>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">tcprofile</span></code> command will add any default values defined in the <strong>install.json</strong> file to the args value.  Args without a default value will have to be populated manually. For validation rules, there are two rules created automatically for each output variable.  One rule ensures that the output variable is not null and should be update to a more specific test. The second rule validates that the output variable is of the correct type (e.g., String value is a &lt;str&gt; type; StringArray value is a &lt;list&gt; type.).</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The generation of profiles uses the <strong>install.json</strong> file to create the <code class="docutils literal notranslate"><span class="pre">args.apps</span></code> section and the <code class="docutils literal notranslate"><span class="pre">validation</span></code> section of the profile. It is important that all inputs and outputs are defined in the <strong>install.json</strong> prior to running the <code class="docutils literal notranslate"><span class="pre">tcprofile</span></code> command.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">A local instance of Redis must be running to test Playbook Apps locally.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">tcprofile</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">action</span> <span class="p">{</span><span class="n">create</span><span class="p">,</span><span class="n">delete</span><span class="p">,</span><span class="n">replace_validation</span><span class="p">,</span><span class="n">update</span><span class="p">,</span><span class="n">validate</span><span class="p">}]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">ij</span> <span class="n">IJ</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">outdir</span> <span class="n">OUTDIR</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">outfile</span> <span class="n">OUTFILE</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">profile_name</span> <span class="n">PROFILE_NAME</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">redis_host</span> <span class="n">REDIS_HOST</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">redis_port</span> <span class="n">REDIS_PORT</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">verbose</span><span class="p">]</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">Show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>
  <span class="o">--</span><span class="n">action</span> <span class="p">{</span><span class="n">create</span><span class="p">,</span><span class="n">delete</span><span class="p">,</span><span class="n">replace_validation</span><span class="p">,</span><span class="n">update</span><span class="p">,</span><span class="n">validate</span><span class="p">}</span>
  <span class="o">--</span><span class="n">ij</span> <span class="n">IJ</span>               <span class="p">(</span><span class="n">Advanced</span><span class="p">)</span> <span class="n">The</span> <span class="n">install</span><span class="o">.</span><span class="n">json</span> <span class="n">file</span> <span class="n">name</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span>
                        <span class="n">install</span><span class="o">.</span><span class="n">json</span><span class="p">)</span>
  <span class="o">--</span><span class="n">outdir</span> <span class="n">OUTDIR</span>       <span class="p">(</span><span class="n">Advanced</span><span class="p">)</span> <span class="n">The</span> <span class="o">*</span><span class="n">base</span><span class="o">*</span> <span class="n">output</span> <span class="n">directory</span> <span class="n">containing</span> <span class="n">the</span>
                        <span class="n">data</span><span class="o">/</span><span class="n">profiles</span> <span class="n">folder</span><span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="n">tcex</span><span class="o">.</span><span class="n">d</span><span class="p">)</span><span class="o">.</span>
  <span class="o">--</span><span class="n">outfile</span> <span class="n">OUTFILE</span>     <span class="p">(</span><span class="n">Advanced</span><span class="p">)</span> <span class="n">The</span> <span class="n">filename</span> <span class="k">for</span> <span class="n">the</span> <span class="n">profile</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span>
                        <span class="o">&lt;</span><span class="n">profile</span> <span class="n">name</span><span class="o">&gt;.</span><span class="n">json</span><span class="p">)</span>
  <span class="o">--</span><span class="n">name</span> <span class="n">PROFILE_NAME</span>   <span class="n">The</span> <span class="n">profile</span> <span class="n">name</span> <span class="n">to</span> <span class="n">create</span><span class="p">,</span> <span class="n">delete</span><span class="p">,</span> <span class="ow">or</span>
                        <span class="n">replace_validation</span>
  <span class="o">--</span><span class="n">redis_host</span> <span class="n">REDIS_HOST</span>
                        <span class="p">(</span><span class="n">Advanced</span><span class="p">)</span> <span class="n">The</span> <span class="n">Redis</span> <span class="n">host</span>
  <span class="o">--</span><span class="n">redis_port</span> <span class="n">REDIS_PORT</span>
                        <span class="p">(</span><span class="n">Advanced</span><span class="p">)</span> <span class="n">The</span> <span class="n">Redis</span> <span class="n">port</span>
  <span class="o">--</span><span class="n">verbose</span>             <span class="n">Show</span> <span class="n">verbose</span> <span class="n">output</span><span class="o">.</span>
</pre></div>
</div>
<div class="section" id="common-usage">
<h3>Common Usage<a class="headerlink" href="#common-usage" title="Permalink to this headline">¶</a></h3>
<p>To create a new profile run the following command.  The profile will be created in the <strong>tcex.d/profiles</strong> directory of the project.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tcprofile</span> <span class="o">--</span><span class="n">name</span> <span class="n">simple_data</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">tcprofile</span></code> command can be run multiple times to generate several different profiles with different input and/or output variables.</p>
</div>
</div>
<div class="section" id="output">
<h3>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<p>After running the <code class="docutils literal notranslate"><span class="pre">tcprofile</span></code>, the directory <strong>tcex.d</strong> will be created in the project directory.  The <strong>tcex.d</strong> directory will have the structure displayed below. New testing profiles can be added to existing file or new files can be created.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>tcex.d
├── data
└── profiles
    └── simple_data.json
</pre></div>
</div>
</div>
<div class="section" id="updates">
<h3>Updates<a class="headerlink" href="#updates" title="Permalink to this headline">¶</a></h3>
<p>Once a profile has been created, testing values need to be added to the JSON data.  All inputs in the <code class="docutils literal notranslate"><span class="pre">args.apps</span></code> section need to have values set or updated. A description can be added to define the intent of the testing profile.</p>
</div>
<div class="section" id="environment-variables">
<h3>Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h3>
<p>An important part of local testing is setting up the appropriate environmental variables.  In each profile, the <code class="docutils literal notranslate"><span class="pre">args.default</span></code> section has all the default args that will be provided to every App by the ThreatConnect platform during execution. The values for these args can be entered directly into the configuration file; however, to keep sensitive data out of version-control systems, the use of environment variables is employed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This list of environment variables can be found by running <code class="docutils literal notranslate"><span class="pre">tcprofile</span> <span class="pre">-h</span></code>.</p>
</div>
<p>Update the values for each variable and add to the local environment (e.g., ~/.bashrc or ~/.bash_profile). Once done, the environment file needs to be sourced once or the shell restarted before the values are available (e.g., source ~/.bashrc).</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span># ThreatConnect API Credential and URL
export API_DEFAULT_ORG=MyOrg
export API_ACCESS_ID=1234
export API_SECRET_KEY=abc123
export TC_API_PATH=https://maclaren.pub/api

# API Token can be supplied optionally but must be updated frequently.
export TC_TOKEN=123-abc-456-def

# Proxy settings are optional
export TC_PROXY_HOST=10.10.10.10
export TC_PROXY_PORT=3128
export TC_PROXY_USERNAME=robin
export TC_PROXY_PASSWORD=sparkles

# The Redis IP/Host and Port
export DB_PATH=localhost
export DB_PORT=6379
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">To test that the values are available, run <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$API_ACCESS_ID</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="profile-format">
<h2>Profile Format<a class="headerlink" href="#profile-format" title="Permalink to this headline">¶</a></h2>
<p>Multiple testing profiles can be created in the <strong>tcex.d/profiles</strong> directory to increase testing coverage.  Each profile must include a unique <strong>profile_name</strong>. One or more groups can be added to a profile to allow testing of multiple profiles at once.</p>
<div class="code javascript highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;app&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;indent&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;json_data&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">four</span><span class="se">\&quot;</span><span class="s2">: 5, </span><span class="se">\&quot;</span><span class="s2">one</span><span class="se">\&quot;</span><span class="s2">: 1, </span><span class="se">\&quot;</span><span class="s2">two</span><span class="se">\&quot;</span><span class="s2">: 2, </span><span class="se">\&quot;</span><span class="s2">three</span><span class="se">\&quot;</span><span class="s2">: 3}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sort_keys&quot;</span><span class="p">:</span> <span class="n">true</span>
      <span class="p">},</span>
      <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;api_access_id&quot;</span><span class="p">:</span> <span class="s2">&quot;$env.API_ACCESS_ID&quot;</span><span class="p">,</span>
        <span class="s2">&quot;api_default_org&quot;</span><span class="p">:</span> <span class="s2">&quot;$env.API_DEFAULT_ORG&quot;</span><span class="p">,</span>
        <span class="s2">&quot;api_secret_key&quot;</span><span class="p">:</span> <span class="s2">&quot;$envs.API_SECRET_KEY&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_api_path&quot;</span><span class="p">:</span> <span class="s2">&quot;$env.TC_API_PATH&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_docker&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;tc_in_path&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_log_level&quot;</span><span class="p">:</span> <span class="s2">&quot;debug&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_log_path&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_log_to_api&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;tc_out_path&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_playbook_db_context&quot;</span><span class="p">:</span> <span class="s2">&quot;c723fe88-d4bb-40db-8a98-bdec323e6190&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_playbook_db_path&quot;</span><span class="p">:</span> <span class="s2">&quot;$env.DB_PATH&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_playbook_db_port&quot;</span><span class="p">:</span> <span class="s2">&quot;$env.DB_PORT&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_playbook_db_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Redis&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_playbook_out_variables&quot;</span><span class="p">:</span> <span class="s2">&quot;#App:7909:json.pretty!String&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_proxy_external&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;tc_proxy_host&quot;</span><span class="p">:</span> <span class="s2">&quot;$env.TC_PROXY_HOST&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_proxy_password&quot;</span><span class="p">:</span> <span class="s2">&quot;$envs.TC_PROXY_PASSWORD&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_proxy_port&quot;</span><span class="p">:</span> <span class="s2">&quot;$env.TC_PROXY_PORT&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_proxy_tc&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;tc_proxy_username&quot;</span><span class="p">:</span> <span class="s2">&quot;$env.TC_PROXY_USERNAME&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tc_temp_path&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;autoclear&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;clear&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;data_files&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;exit_codes&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">0</span>
    <span class="p">],</span>
    <span class="s2">&quot;groups&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;qa-build&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;install_json&quot;</span><span class="p">:</span> <span class="s2">&quot;install.json&quot;</span><span class="p">,</span>
    <span class="s2">&quot;profile_name&quot;</span><span class="p">:</span> <span class="s2">&quot;simple_data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;quiet&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;validations&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;four&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
          <span class="s2">&quot;one&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">&quot;three&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
          <span class="s2">&quot;two&quot;</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">},</span>
        <span class="s2">&quot;data_type&quot;</span><span class="p">:</span> <span class="s2">&quot;redis&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operator&quot;</span><span class="p">:</span> <span class="s2">&quot;json-compare&quot;</span><span class="p">,</span>
        <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;#App:7909:json.pretty!String&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="s2">&quot;data_type&quot;</span><span class="p">:</span> <span class="s2">&quot;redis&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operator&quot;</span><span class="p">:</span> <span class="s2">&quot;it&quot;</span><span class="p">,</span>
        <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;#App:7909:json.pretty!String&quot;</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="section" id="args-app">
<h3>args.app<a class="headerlink" href="#args-app" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">args.app</span></code> section of the profile contains all the CLI args from the <code class="docutils literal notranslate"><span class="pre">params</span></code> section of the <strong>install.json</strong> file.</p>
</div>
<div class="section" id="args-default">
<h3>args.default<a class="headerlink" href="#args-default" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">args.default</span></code> section has all the default args that are passed to all Apps by ThreatConnect. Some of these args are in the format <code class="docutils literal notranslate"><span class="pre">$env.&lt;value&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">$envs.&lt;value&gt;</span></code>. Args in this format reference environment variables defined on the local workstation. These environment variables must be created manually by the developer.  The <code class="docutils literal notranslate"><span class="pre">$envs.&lt;values&gt;</span></code> are used to represent sensitive data, such as API credentials, and will be masked when printed to the screen.</p>
</div>
<div class="section" id="autoclear">
<h3>autoclear<a class="headerlink" href="#autoclear" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">autoclear</span></code> boolean field enables clearing of Redis and/or ThreatConnect data when set to <strong>true</strong>. By using <strong>autoclear</strong>, the developer can assure that validation rules are not using stale data. The most common use case is to leave this enabled, unless using output data from previous profiles.</p>
</div>
<div class="section" id="data-files">
<h3>data_files<a class="headerlink" href="#data-files" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">data_files</span></code> section of the configuration allows an array of staging files to be defined. Each staging file defined in this section will be staged to Redis and/or ThreatConnect to simulate an upstream App.  For help creating staging files see the <a class="reference internal" href="#id1">Data Files</a> section.</p>
</div>
<div class="section" id="description">
<h3>description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">description</span></code> field allows for a helpful message that will be logged when the profile is run (e.g., “Pass test of simple JSON data.” or “Fail test when passing in null data.”).</p>
</div>
<div class="section" id="exit-codes">
<h3>exit_codes<a class="headerlink" href="#exit-codes" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">exit_codes</span></code> section allows for one or more exit codes to be defined. If the exit code of the App matches one of the defined values, then the profile was completed successfully. For “fail” testing, adding an exit code of <strong>1</strong> is appropriate.  If the App exits with a <strong>1</strong> then the profile succeeded.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For Job Apps there are three valid exit codes.  An exit code of 0 indicates success, 1 indicates failure, and 3 indicates partial success/failure.</p>
</div>
</div>
<div class="section" id="groups">
<h3>groups<a class="headerlink" href="#groups" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">groups</span></code> section allows for one or more group names, so that the profile can be run grouped with other profiles.</p>
</div>
<div class="section" id="install-json">
<h3>install_json<a class="headerlink" href="#install-json" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">install_json</span></code> field defines the <strong>install.json</strong> filename of the App. This is typically <code class="docutils literal notranslate"><span class="pre">install.json</span></code>, unless working in a multi-App bundle.</p>
</div>
<div class="section" id="profile-name">
<h3>profile_name<a class="headerlink" href="#profile-name" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">profile_name</span></code> field defines the name of the profile.  This is the name that will be used to run the profile using the <code class="docutils literal notranslate"><span class="pre">tcrun</span></code> command.</p>
</div>
<div class="section" id="quiet">
<h3>quiet<a class="headerlink" href="#quiet" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">quiet</span></code> boolean field will silence all App output when set to <strong>true</strong>.</p>
</div>
<div class="section" id="validations">
<h3>validations<a class="headerlink" href="#validations" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">validations</span></code> section of the configuration file defines validations rules for testing Playbook App outputs.</p>
</div>
</div>
<div class="section" id="staging-redis-data">
<h2>Staging Redis Data<a class="headerlink" href="#staging-redis-data" title="Permalink to this headline">¶</a></h2>
<p>In order to test using variable inputs, the data can be manually added to Redis.  The <code class="docutils literal notranslate"><span class="pre">tcrun</span></code> command has functionality to “stage” the data in Redis, which can be used to simulate an upstream App writing data to Redis.  This staged data can be added to a single json file or multiple reusable files.  Once the files have been created, they should be referenced in the profile.</p>
</div>
<div class="section" id="id1">
<h2>Data Files<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Data files can contain a single data input or multiple data inputs.  If the data is reusable, it is best practice to keep the data in a file by itself so that it can be used in multiple profiles.</p>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
  <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">[{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">125</span><span class="p">,</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;threat001-build-testing&quot;</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Threat&quot;</span><span class="p">,</span>
      <span class="s2">&quot;ownerName&quot;</span><span class="o">:</span> <span class="s2">&quot;qa-build&quot;</span><span class="p">,</span>
      <span class="s2">&quot;dateAdded&quot;</span><span class="o">:</span> <span class="s2">&quot;2017-08-16T18:45:42-04:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;webLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://mytc.myorg.com/auth/threat/threat.xhtml?threat=125&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">124</span><span class="p">,</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;incident001-build-testing&quot;</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Incident&quot;</span><span class="p">,</span>
      <span class="s2">&quot;ownerName&quot;</span><span class="o">:</span> <span class="s2">&quot;qa-build&quot;</span><span class="p">,</span>
      <span class="s2">&quot;dateAdded&quot;</span><span class="o">:</span> <span class="s2">&quot;2017-08-16T18:44:57-04:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;webLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://mytc.myorg.com/auth/incident/incident.xhtml?incident=124&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;doc001-build-testing&quot;</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Document&quot;</span><span class="p">,</span>
      <span class="s2">&quot;ownerName&quot;</span><span class="o">:</span> <span class="s2">&quot;qa-build&quot;</span><span class="p">,</span>
      <span class="s2">&quot;dateAdded&quot;</span><span class="o">:</span> <span class="s2">&quot;2017-08-16T18:43:54-04:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;webLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://mytc.myorg.com/auth/document/document.xhtml?document=123&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">122</span><span class="p">,</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;camp001-build-testing&quot;</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Campaign&quot;</span><span class="p">,</span>
      <span class="s2">&quot;ownerName&quot;</span><span class="o">:</span> <span class="s2">&quot;qa-build&quot;</span><span class="p">,</span>
      <span class="s2">&quot;dateAdded&quot;</span><span class="o">:</span> <span class="s2">&quot;2017-08-16T18:40:56-04:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;webLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://mytc.myorg.com/auth/campaign/campaign.xhtml?campaign=122&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">116</span><span class="p">,</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;adver001-build-testing&quot;</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Adversary&quot;</span><span class="p">,</span>
      <span class="s2">&quot;ownerName&quot;</span><span class="o">:</span> <span class="s2">&quot;qa-build&quot;</span><span class="p">,</span>
      <span class="s2">&quot;dateAdded&quot;</span><span class="o">:</span> <span class="s2">&quot;2017-08-16T18:35:07-04:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;webLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://mytc.myorg.com/auth/adversary/adversary.xhtml?adversary=116&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;variable&quot;</span><span class="o">:</span> <span class="s2">&quot;#App:0022:groups!TCEntityArray&quot;</span>
<span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="data-validation">
<h2>Data Validation<a class="headerlink" href="#data-validation" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">tcrun</span></code> command will run any validation rules defined in the profile. Currently, the <code class="docutils literal notranslate"><span class="pre">tcrun</span></code> command can validate the output data stored in Redis by the App.</p>
<p><strong>Example Configuration</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;validations&quot;</span><span class="o">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;four&quot;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
      <span class="s2">&quot;one&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;three&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="s2">&quot;two&quot;</span><span class="o">:</span> <span class="mi">2</span>
    <span class="p">},</span>
    <span class="s2">&quot;data_type&quot;</span><span class="o">:</span> <span class="s2">&quot;redis&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operator&quot;</span><span class="o">:</span> <span class="s2">&quot;json-compare&quot;</span><span class="p">,</span>
    <span class="s2">&quot;variable&quot;</span><span class="o">:</span> <span class="s2">&quot;#App:7909:json.pretty!String&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data_type&quot;</span><span class="o">:</span> <span class="s2">&quot;redis&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operator&quot;</span><span class="o">:</span> <span class="s2">&quot;it&quot;</span><span class="p">,</span>
    <span class="s2">&quot;variable&quot;</span><span class="o">:</span> <span class="s2">&quot;#App:7909:json.pretty!String&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="section" id="supported-operators">
<h3>Supported Operators<a class="headerlink" href="#supported-operators" title="Permalink to this headline">¶</a></h3>
<p>For a list of supported <strong>operators</strong>,see the <a class="reference internal" href="tcex_docs/tcex.tcex_bin_run.html#tcex.tcex_bin_run.TcExRun.operators" title="tcex.tcex_bin_run.TcExRun.operators"><code class="xref py py-meth docutils literal notranslate"><span class="pre">operators()</span></code></a> property of the <code class="docutils literal notranslate"><span class="pre">tcrun</span></code> command.</p>
</div>
</div>
</div>


           </div>

          </div>
          <footer>

    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">

        <a href="testing_apps_tcrun.html" class="btn btn-neutral float-right" title="Testing Apps: Running Profiles (tcrun)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>


        <a href="building_apps_tcpackage.html" class="btn btn-neutral float-left" title="Building Apps: Packaging (tcpackage)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>

    </div>


  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, ThreatConnect Inc

    </p>
  </div>

</footer>

        </div>
      </div>

    </section>

  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>






</body>
</html>
